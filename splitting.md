# Splitting 
在渲染方程的求解过程中，需要生成N个采样：

采样包含图像位置采样（px,py）  (多个采样用来反走样) 、 光源位置采样（对面积光而言需要几十甚至几百个）。

传统的方法的话，生成一个采样就包含图像位置的一个采样以及光源的一个采样，那么由于光源需要很多采样，则整体采样会非常多（但对图像采样而言，几十甚至上百个相机光线采样毫无必要）。

splitting 方法： 在某个维度进行一个采样，然后对每个采样，在其它维度进行多个采样。

splitting 方法对应的monte carlo estimator 为：

$$F = \frac{1}{N} \frac{1}{M} \Sigma_{i=1}^N \Sigma_{j=1}^M \frac{f(px,py,\omega)}{p(px,py)p(\omega)} $$

这样，对图像采样(px,py) 只需生成5个采样，而对每个图像采样，生成20个光源采样。 这样光源采样总共还是有100个，可以获得好的软阴影效果。


