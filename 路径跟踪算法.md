# 路径跟踪

> 应用LTE的路径积分形式，可以设计 path trace 渲染算法。

由之前的结论，得知：

$$L(p_1 -> p_0) = \Sigma_{i=1}^\infty P(p_n)$$
($$p_0$$在相机处，$$p_1$$是到达场景中的第一个交点)

问题：

1. 如何通过有限项的和计算级数的和？
2. 如何生成某个特定的路径$$p_i$$?

第一个问题可以通过Russian routlette 方法解决，每个step后以$$q_i$$的概率终止(不终止的概率为$$1-q_i$$).

$$\Sigma_{i=1}^\infty P(p_n) = \frac{1}{1-q_1} (P(p_1) + \frac{1}{1-q_2} (...))$$

这样有限步和的期望就是原级数的和。


第二个问题，可以通过路径采样生成路径，然后在该路径上计算$$P(p_i)$$。生成路径，相当于从场景中均匀采样i个点（从$$p_0$$ 到 $$p_{i-1}$$）, 然后从光源中采样$$P_i$$,这样就得到了要求的路径。



